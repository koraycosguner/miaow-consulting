<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculating Price Elasticity of Demand, Revenue, and Profit</title>
    <style>
        :root {
            --primary: #990000; /* IU Crimson */
            --text-main: #111827;
            --text-light: #4b5563;
            --bg: #f9fafb;
            --surface: #ffffff;
            --border: #e5e7eb;
            --accent-bg: #f3f4f6;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: var(--bg);
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
            line-height: 1.6;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        .header { text-align: center; margin-bottom: 40px; }
        .header h1 { font-size: 2rem; font-weight: 800; margin: 0 0 10px 0; letter-spacing: -0.02em; }
        .header p { color: var(--text-light); font-size: 1.1rem; }

        /* Card Styles */
        .card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.02);
            margin-bottom: 30px;
        }

        /* Input Grid */
        .grid-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 0.9rem; font-weight: 600; margin-bottom: 8px; color: var(--text-main); }
        .input-group input {
            width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 6px; font-size: 1rem; box-sizing: border-box; 
        }
        .input-group input:focus { outline: none; border-color: var(--primary); box-shadow: 0 0 0 3px rgba(153, 0, 0, 0.1); }

        .section-label {
            grid-column: 1 / -1; font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-light);
            border-bottom: 1px solid var(--border); padding-bottom: 5px; margin-top: 10px; margin-bottom: 15px; font-weight: 700;
        }

        .btn-calc {
            background: var(--primary); color: white; border: none; padding: 14px 28px; border-radius: 8px; font-size: 1rem; font-weight: 700;
            cursor: pointer; width: 100%; transition: background 0.2s;
        }
        .btn-calc:hover { background: #7a0000; }

        /* Results Area */
        #results { display: none; animation: fadeIn 0.4s ease-out; }

        .metrics-grid {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;
        }

        .metric-card {
            background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 20px; text-align: center;
        }
        .metric-title { font-size: 0.9rem; color: var(--text-light); font-weight: 600; margin-bottom: 10px; }
        .metric-value { font-size: 2rem; font-weight: 800; color: var(--text-main); }

        /* Levels Table */
        .levels-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }
        .levels-table th { text-align: left; padding: 10px; border-bottom: 2px solid var(--border); color: var(--text-light); font-weight: 700; }
        .levels-table td { padding: 10px; border-bottom: 1px solid #f3f4f6; color: var(--text-main); }
        .levels-table tr:last-child td { border-bottom: none; font-weight: 700; }
        .diff-pos { color: #059669; font-weight: 600; }
        .diff-neg { color: #dc2626; font-weight: 600; }

        /* Analysis Box */
        .analysis-box {
            background: #ffffff; border: 1px solid var(--border); border-left: 4px solid var(--primary); padding: 25px; border-radius: 8px; margin-top: 30px;
        }
        .analysis-title { font-weight: 800; font-size: 1.2rem; margin-bottom: 20px; color: var(--text-main); }
        
        .insight-item { margin-bottom: 25px; padding-bottom: 25px; border-bottom: 1px solid #f3f4f6; }
        .insight-item:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }
        
        .insight-label { font-weight: 700; color: var(--primary); display: block; margin-bottom: 6px; font-size: 1rem; }
        .insight-text { font-size: 0.95rem; color: var(--text-light); line-height: 1.6; }

        /* Interpretation Guide */
        .guide-section {
            background: var(--accent-bg); border-radius: 8px; padding: 25px; margin-top: 40px; font-size: 0.95rem;
        }
        .guide-title { font-weight: 700; color: var(--text-main); margin-bottom: 15px; display: block; font-size: 1rem; }
        .guide-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; } /* Updated to 3 columns */
        .guide-item strong { color: var(--primary); }
        .guide-list { margin-top: 8px; padding-left: 18px; color: var(--text-light); margin-bottom: 0; }
        .guide-list li { margin-bottom: 6px; }

        .footer {
            margin-top: 60px; text-align: center; font-size: 0.85rem; color: #9ca3af; border-top: 1px solid var(--border); padding-top: 20px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        @media (max-width: 768px) { .grid-3, .metrics-grid, .guide-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
<!-- Auth check -->
<div id="loading-screen" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: white; display: flex; align-items: center; justify-content: center; z-index: 9999;">
    <p style="color: #64748b;">Loading...</p>
</div>
<div id="main-content" style="display: none;">

<div style="max-width: 1000px; margin: 0 auto; padding: 20px 20px 20px;">
    <a href="tools.html" style="display: inline-flex; align-items: center; gap: 6px; color: #64748b; text-decoration: none; font-size: 0.9rem; font-weight: 500;">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
        Back to Pricing & Analytics Tools
    </a>
</div>

<div class="container">
    <div class="header">
        <h1>Calculating Price Elasticity of Demand, Revenue, and Profit</h1>
        <p>Analyze the sensitivity of Demand, Revenue, and Profit to price changes.</p>
    </div>

    <div class="card">
        <div class="grid-3">
            <div>
                <div class="section-label">Initial State</div>
                <div class="input-group">
                    <label>Initial Price ($)</label>
                    <input type="number" id="p1" placeholder="e.g. 10.00" step="0.01">
                </div>
                <div class="input-group">
                    <label>Initial Quantity</label>
                    <input type="number" id="q1" placeholder="e.g. 1000">
                </div>
            </div>

            <div>
                <div class="section-label">New State</div>
                <div class="input-group">
                    <label>New Price ($)</label>
                    <input type="number" id="p2" placeholder="e.g. 11.00" step="0.01">
                </div>
                <div class="input-group">
                    <label>New Quantity</label>
                    <input type="number" id="q2" placeholder="e.g. 950">
                </div>
            </div>

            <div>
                <div class="section-label">Cost Structure</div>
                <div class="input-group">
                    <label>Variable Cost per Unit ($)</label>
                    <input type="number" id="vc" placeholder="e.g. 6.00" step="0.01">
                </div>
                <div style="margin-top: 32px;">
                    <button class="btn-calc" onclick="calculate()">Calculate Price Elasticities</button>
                </div>
            </div>
        </div>
    </div>

    <div id="results">
        <div class="metrics-grid">
            <div class="metric-card">
                <div class="metric-title">Price Elasticity of Demand</div>
                <div class="metric-value" id="ped-value">--</div>
            </div>
            <div class="metric-card">
                <div class="metric-title">Price Elasticity of Revenue</div>
                <div class="metric-value" id="per-value">--</div>
            </div>
            <div class="metric-card">
                <div class="metric-title">Price Elasticity of Profit</div>
                <div class="metric-value" id="pep-value">--</div>
            </div>
        </div>

        <div class="card">
            <div class="section-label">Financial Levels (Before & After)</div>
            <table class="levels-table">
                <thead>
                    <tr>
                        <th width="30%">Metric</th>
                        <th width="25%">Initial</th>
                        <th width="25%">New</th>
                        <th width="20%">Difference</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Revenue</td>
                        <td id="lvl-r1">--</td>
                        <td id="lvl-r2">--</td>
                        <td id="lvl-rdiff">--</td>
                    </tr>
                    <tr>
                        <td>Unit Margin</td>
                        <td id="lvl-m1">--</td>
                        <td id="lvl-m2">--</td>
                        <td id="lvl-mdiff">--</td>
                    </tr>
                    <tr>
                        <td>Total Profit</td>
                        <td id="lvl-pi1">--</td>
                        <td id="lvl-pi2">--</td>
                        <td id="lvl-pidiff">--</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="analysis-box">
            <div class="analysis-title">Strategic Insights & Tension Analysis</div>
            
            <div class="insight-item">
                <span class="insight-label">1. Demand Elasticity (Threshold: -1)</span>
                <div class="insight-text" id="insight-ped">--</div>
            </div>

            <div class="insight-item">
                <span class="insight-label">2. Revenue Tension (Price Effect vs. Volume Effect)</span>
                <div class="insight-text" id="insight-per">--</div>
            </div>

            <div class="insight-item">
                <span class="insight-label">3. Profit Tension (Margin vs. Volume)</span>
                <div class="insight-text" id="insight-pep">--</div>
            </div>
        </div>
    </div>

    <div class="guide-section">
        <span class="guide-title">How to Interpret These Numbers</span>
        <div class="guide-grid">
            
            <div class="guide-item">
                <strong>Demand Elasticity</strong>
                <br>Measures customer sensitivity.
                <ul class="guide-list">
                    <li>|E| > 1: <strong>Elastic.</strong> Volume swings are larger than price swings.</li>
                    <li>|E| < 1: <strong>Inelastic.</strong> Volume remains relatively stable.</li>
                </ul>
            </div>

            <div class="guide-item">
                <strong>Revenue Elasticity</strong>
                <br>Measures top-line sales impact.
                <ul class="guide-list">
                    <li>E > 0: <strong>Positive.</strong> Revenue moves <em>with</em> price.</li>
                    <li>E < 0: <strong>Negative.</strong> Revenue moves <em>against</em> price.</li>
                </ul>
            </div>

            <div class="guide-item">
                <strong>Profit Elasticity</strong>
                <br>Measures bottom-line leverage.
                <ul class="guide-list">
                    <li>E > 1: <strong>High Leverage.</strong> A 1% price hike boosts profit by > 1%.</li>
                    <li>E > 0: <strong>Positive.</strong> Profit moves with price.</li>
                    <li>E < 0: <strong>Negative.</strong> Profit moves against price.</li>
                </ul>
            </div>

        </div>
    </div>

    <div class="footer">
        Created by Dr. Koray Cosguner with the help of Gemini 3.0.
    </div>
</div>

<script>
    function calculate() {
        // 1. Get Inputs
        const p1 = parseFloat(document.getElementById('p1').value);
        const q1 = parseFloat(document.getElementById('q1').value);
        const p2 = parseFloat(document.getElementById('p2').value);
        const q2 = parseFloat(document.getElementById('q2').value);
        const vc = parseFloat(document.getElementById('vc').value);

        if (!p1 || !q1 || !p2 || !q2 || isNaN(vc)) {
            alert("Please fill in all fields.");
            return;
        }

        // 2. Calculate Financials
        const r1 = p1 * q1;
        const r2 = p2 * q2;
        
        const m1 = p1 - vc; // Unit Margin 1
        const m2 = p2 - vc; // Unit Margin 2

        const profit1 = m1 * q1;
        const profit2 = m2 * q2;

        // 3. Calculate % Changes
        const pctP = (p2 - p1) / p1;
        const pctQ = (q2 - q1) / q1;
        const pctR = (r2 - r1) / r1;
        const pctProfit = (profit2 - profit1) / Math.abs(profit1); 

        if (pctP === 0) {
            alert("Price must change to calculate elasticity.");
            return;
        }

        // 4. Calculate Elasticities
        const ped = pctQ / pctP;
        const per = pctR / pctP;
        const pep = pctProfit / pctP;

        // 5. Display Results
        document.getElementById('results').style.display = 'block';
        const fmt = (num) => num.toFixed(2);
        const fmtCur = (num) => "$" + num.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
        
        // --- Elasticity Cards ---
        document.getElementById('ped-value').innerText = fmt(ped);
        document.getElementById('per-value').innerText = fmt(per);
        document.getElementById('pep-value').innerText = fmt(pep);

        // Simple Color Logic
        document.getElementById('ped-value').style.color = Math.abs(ped) > 1 ? "#dc2626" : "#059669"; 
        document.getElementById('per-value').style.color = per > 0 ? "#059669" : "#dc2626";
        document.getElementById('pep-value').style.color = pep > 0 ? "#059669" : "#dc2626";

        // --- Levels Table ---
        document.getElementById('lvl-r1').innerText = fmtCur(r1);
        document.getElementById('lvl-r2').innerText = fmtCur(r2);
        
        document.getElementById('lvl-m1').innerText = fmtCur(m1);
        document.getElementById('lvl-m2').innerText = fmtCur(m2);
        
        document.getElementById('lvl-pi1').innerText = fmtCur(profit1);
        document.getElementById('lvl-pi2').innerText = fmtCur(profit2);

        // Diff Colors
        const setDiff = (id, val) => {
            const el = document.getElementById(id);
            el.innerText = (val >= 0 ? "+" : "") + fmtCur(val);
            el.className = val >= 0 ? "diff-pos" : "diff-neg";
        };
        setDiff('lvl-rdiff', r2 - r1);
        setDiff('lvl-mdiff', m2 - m1);
        setDiff('lvl-pidiff', profit2 - profit1);

        // 6. Generate Insights & Tension Analysis
        const isPriceIncrease = pctP > 0;

        // --- Demand Insight ---
        let pedText = "";
        if (Math.abs(ped) > 1) {
            pedText = `<strong>Elastic Demand (|E| > 1):</strong> Customers are highly sensitive. A 1% price change causes a <em>greater than</em> 1% change in volume.`;
        } else {
            pedText = `<strong>Inelastic Demand (|E| < 1):</strong> Customers are relatively insensitive. A 1% price change causes a <em>less than</em> 1% change in volume.`;
        }
        document.getElementById('insight-ped').innerHTML = pedText;

        // --- Revenue Tension (Price vs Volume) ---
        let perText = "";
        if (r2 > r1) {
            perText = `<strong>Revenue Increased:</strong> `;
            if (isPriceIncrease) {
                // Price Up, Revenue Up (Inelastic)
                perText += `The <strong>Price Effect</strong> (higher prices) dominated the Volume Effect (sales decline). You gained more from the higher price tag than you lost in volume.`;
            } else {
                // Price Down, Revenue Up (Elastic)
                perText += `The <strong>Volume Effect</strong> (sales surge) dominated the Price Effect (lower prices). The added volume outweighed the discount.`;
            }
        } else if (r2 < r1) {
            perText = `<strong>Revenue Decreased:</strong> `;
            if (isPriceIncrease) {
                // Price Up, Revenue Down (Elastic)
                perText += `The <strong>Volume Effect</strong> (sales decline) dominated the Price Effect. Customers fled too fast to make the price hike worth it.`;
            } else {
                // Price Down, Revenue Down (Inelastic)
                perText += `The <strong>Price Effect</strong> (discount) dominated the Volume Effect. You didn't generate enough sales to pay for the discount.`;
            }
        } else {
            perText = `<strong>Revenue Unchanged:</strong> The Price Effect and Volume Effect perfectly cancelled each other out.`;
        }
        document.getElementById('insight-per').innerHTML = perText;

        // --- Profit Tension (Margin vs Volume) ---
        let pepText = "";
        
        // Leverage Warning
        if (pep > 1) {
             pepText += `<strong>High Leverage Situation:</strong> A 1% price increase boosted profit by more than 1%. <br><br>`;
        } else if (pep < -1 && !isPriceIncrease) {
             pepText += `<strong>High Downside Leverage:</strong> A 1% price cut crashed profit by more than 1%. <br><br>`;
        }

        if (profit2 > profit1) {
            pepText += `<strong>Profit Improved:</strong> `;
            if (isPriceIncrease) {
                pepText += `The <strong>Higher Unit Margin</strong> ($${fmt(m2)} vs $${fmt(m1)}) successfully offset the lower sales volume. Even with fewer sales, each sale was significantly more profitable.`;
            } else {
                pepText += `The <strong>Higher Sales Volume</strong> successfully compensated for the thinner Unit Margin ($${fmt(m2)} vs $${fmt(m1)}). You made it up on volume.`;
            }
        } else if (profit2 < profit1) {
            pepText += `<strong>Profit Declined:</strong> `;
            if (isPriceIncrease) {
                pepText += `The <strong>Loss of Volume</strong> was too severe. The extra margin per unit could not make up for the drop in total units sold.`;
            } else {
                pepText += `The <strong>Margin Squeeze</strong> ($${fmt(m2)} vs $${fmt(m1)}) was too deep. The increase in volume wasn't enough to cover the loss in profitability per unit.`;
            }
        } else {
            pepText += `<strong>Profit Neutral:</strong> The trade-off between Margin and Volume perfectly balanced out.`;
        }

        document.getElementById('insight-pep').innerHTML = pepText;
    }
</script>

</div> <!-- end main-content -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBg3LJDwVIRGWtFZb_mM_CSRJMNCJUta20",
        authDomain: "iu-pricing-tools.firebaseapp.com",
        projectId: "iu-pricing-tools",
        storageBucket: "iu-pricing-tools.firebasestorage.app",
        messagingSenderId: "659335573790",
        appId: "1:659335573790:web:00013a166787efecb3d90f",
        measurementId: "G-NGKNY08XWP"
    };
    firebase.initializeApp(firebaseConfig);
    firebase.auth().onAuthStateChanged(function(user) {
        if (user) {
            document.getElementById('loading-screen').style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
        } else {
            window.location.href = 'login.html';
        }
    });
</script>

</body>
</html>